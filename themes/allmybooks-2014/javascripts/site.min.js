var bookFunctions={toggleOptions:function(a){$("#"+a).hasClass("show-options")?($("#"+a).find(".book--options").slideUp(),$("#"+a).removeClass("show-options")):($("#"+a).find(".book--options").slideDown(),$("#"+a).addClass("show-options"))},updateList:function(a,b){var c=[],d=1;if("future"==a){$("#future-read-list .book").each(function(){c.push(this.id.substring(5)+":"+d),d++}),c=c.join(",");var e="list=future&future_list="+c}else var e="list="+a+"&id="+b;$.ajax({type:"POST",url:templateDirectory+"/php/save-list.php",data:e,success:function(a){a.length&&(console.log(a),$("#logged-out-warning").addClass("animate-open").removeClass("animate-close").find("p").text(a))}})}},checkVisible=function(a,b){b=b||"visible";var c=$(window).height(),d=$(window).scrollTop(),e=$(a).offset().top,f=$(a).height();return"visible"===b?c+d>e&&e>d-f:"above"===b?c+d>e:void 0},visibleLooper=function(){$("#future-read-list").hasClass("expanded")&&$("#future-read-list").find(".overflow").each(function(){if(!$(this).hasClass("animate")&&checkVisible($(this),"above")){var a=Math.floor(700*Math.random());$(this).delay(a).queue(function(){$(this).addClass("animate").dequeue()})}})},$=jQuery.noConflict();$(document).ready(function(){$(".book").each(function(){var a=$(this).closest(".book-list");$(this).find(".book--options a").each(function(){a.hasClass($(this).attr("class"))&&$(this).addClass("active")})}).on("click","h1",function(){bookFunctions.toggleOptions($(this).closest(".book").attr("ID"))}),$(".book--options").on("click","a",function(){var a=$(this).closest(".book"),b=$(this).attr("class");$(this).hasClass("active")||$(this).hasClass("delete")?$(this).hasClass("delete")&&confirm("Are you sure you want to delete "+a.find("h1").text()+"?")&&(bookFunctions.updateList(b,a.attr("ID").substring(5)),a.css("opacity",".5").slideUp(400)):($(this).closest(".book--options").children("a").removeClass("active"),$(this).hasClass("finished")&&!$(this).hasClass("active")&&$("#finished-read").slideDown(),$(this).addClass("active"),a.css("opacity",".5").slideUp(400,function(){$(".book-list."+b).prepend(a),bookFunctions.updateList(b,a.attr("ID").substring(5)),bookFunctions.toggleOptions(a.attr("ID")),$("#"+a.attr("ID")).delay(250).slideDown(400,function(){$(this).css("opacity","1")})}))}),$("#show-full-list-button").on("click",function(){var a=$("#future-read-list");a.toggleClass("expanded").toggleClass("collapsed"),a.hasClass("expanded")?($(this).text("less books"),visibleLooper()):$(this).text("more books")}),$(window).scroll(function(){visibleLooper()})});